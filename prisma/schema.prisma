// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    clerkId          String             @id @unique
    items            Item[]
    RentingQueryCard RentingQueryCard[]
    createdAt        DateTime           @default(now())
    updatedAt        DateTime           @updatedAt
}

model Item {
    id                 Int              @id @default(autoincrement())
    name               String
    description        String
    rentPerDay         Float
    ownerId            String
    owner              User             @relation(fields: [ownerId], references: [clerkId])
    images             Image[]
    RentingQueryCard   RentingQueryCard @relation(fields: [rentingQueryCardId], references: [id])
    rentingQueryCardId Int              @unique
    createdAt          DateTime         @default(now())
    updatedAt          DateTime         @updatedAt
}

model Image {
    fileKey   String   @id @unique
    fileUrl   String
    Item      Item     @relation(fields: [itemId], references: [id])
    itemId    Int
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model RentingQueryCard {
    id         Int       @id @default(autoincrement())
    proposerId String
    proposer   User      @relation(fields: [proposerId], references: [clerkId])
    applyerId  String?
    item       Item?
    type       QueryType
    createdAt  DateTime  @default(now())
    updatedAt  DateTime  @updatedAt
}

enum QueryType {
    ASK
    OFFER
}
